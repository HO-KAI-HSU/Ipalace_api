"use strict";(self["webpackChunknpm_frontend"]=self["webpackChunknpm_frontend"]||[]).push([[65],{5464:function(s,t,e){e.d(t,{Z:function(){return n}});var a=function(){var s=this,t=s._self._c;return t("div",[t("div",{staticClass:"sayHello"},[t("h3",[s._v(s._s(s.$user.user.Name)),t("span",[s._v("老師您好")])]),t("p",[s._v("歡迎使用故宮線上學校教師專區")])]),t("div",{staticClass:"tab"},[t("ul",[t("li",[t("router-link",{attrs:{"active-class":"act",to:"/teacher/class/my"}},[s._v("我的班級")])],1),t("li",[t("router-link",{attrs:{"active-class":"act",to:"/teacher/class/create"}},[s._v("建立班級")])],1),t("li",[t("router-link",{attrs:{"active-class":"act",to:"/teacher/class/trace"}},[s._v("學習進度追蹤")])],1)])])])},o=[],i=e(1001),r={},l=(0,i.Z)(r,a,o,!1,null,null,null),n=l.exports},7065:function(s,t,e){e.r(t),e.d(t,{default:function(){return u}});var a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"main"},[t("div",{staticClass:"row"},[t("div",{staticClass:"container coursePageAll"},[s._m(0),t("Header"),t("div",{staticClass:"pageBoxOuter"},[s._m(1),t("div",{staticClass:"pageBox"},[t("div",{staticClass:"processBar x2"}),t("div",{staticClass:"courseFilter"},[t("div",{staticClass:"formRow c_type"},[t("label",[s._v("課程類別")]),t("select",{directives:[{name:"model",rawName:"v-model",value:s.Category,expression:"Category"}],on:{change:function(t){var e=Array.prototype.filter.call(t.target.options,(function(s){return s.selected})).map((function(s){var t="_value"in s?s._value:s.value;return t}));s.Category=t.target.multiple?e:e[0]}}},s._l(s.LessonCategories,(function(e){return t("option",{key:e.CategoryName,domProps:{value:e.LessonCategoryID}},[s._v(" "+s._s(e.CategoryName)+" ")])})),0)]),t("div",{staticClass:"formRow c_search"},[t("label",[s._v("課程搜尋")]),t("input",{directives:[{name:"model",rawName:"v-model",value:s.Keyword,expression:"Keyword"}],attrs:{type:"text"},domProps:{value:s.Keyword},on:{input:function(t){t.target.composing||(s.Keyword=t.target.value)}}}),s._e()])]),t("div",{staticClass:"courseList"},s._l(s.Lessons,(function(e){return t("a",{key:e.LessonID,staticClass:"courseListItem",class:{choose:e.Selected},attrs:{href:"javascript:void(0);"},on:{click:function(s){e.Selected=!e.Selected}}},[t("div",{staticClass:"courseImg"},[t("img",{attrs:{src:s._f("imageCDN")(e.ImageUrl)}})]),t("div",{staticClass:"courseInfo"},[t("h3",[s._v(s._s(e.LessonName))]),1==e.LessonCategoryID?t("div",{staticClass:"cateTag"},[s._v("師培課程")]):t("div",{staticClass:"cateTag"},[s._v("學生課程")]),t("div",{staticClass:"time"},[t("img",{attrs:{src:"/img/action.png"}}),s._v(s._s(s._f("mmss")(e.VideoLength))+" ")])])])})),0),t("div",{staticClass:"stepControl"},[t("div",{staticClass:"prevBtn"},[t("router-link",{attrs:{to:"/teacher/class/create2"}},[s._v("上一步")])],1),t("div",{staticClass:"nextBtn"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:s.next}},[s._v("下一步")])])])])])],1)])])},o=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"coursePageTitle"},[t("h3",[s._v("教師專區")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"stepTitle"},[t("h4",[t("span",[s._v("Step2 - ")]),s._v("選擇課程")])])}],i=(e(7658),e(5464)),r=e(3525),l=[],n={data(){return{classRoom:null,Lessons:[],LessonCategories:[{LessonCatrgoryID:null,CategoryName:"全部"}],Category:null,Keyword:""}},components:{Header:i.Z},async mounted(){this.setBase("tSpace page"),this.classRoom=r.Z.getClassRoom();var[s,t]=await Promise.all([this.$api.getLessonCategories(),this.$api.getAllLessons()]);l=t;var e={};this.classRoom.Lessons.forEach((s=>e[s]=!0)),l.forEach((s=>s.Selected=e[s.LessonID]||!1)),this.Lessons=l,this.LessonCategories.push(...s),this.Category=this.LessonCategories[0]},methods:{filter(){var s=l;this.Category&&(s=s.filter((s=>s.LessonCategoryID==this.Category))),this.Keyword&&(s=s.filter((s=>s.LessonName.indexOf(this.Keyword)>=0))),this.Lessons=s},next(){var s=l.filter((s=>s.Selected)).map((s=>s.LessonID));0!=s.length?(this.classRoom.Lessons=s,r.Z.save(),this.$router.push("/teacher/class/create/info")):alert("請選擇課程")}},watch:{Category(){this.filter()},Keyword(){this.filter()}}},c=n,m=e(1001),v=(0,m.Z)(c,a,o,!1,null,null,null),u=v.exports},3525:function(s,t){const e="TempClassRoom";t.Z={storage:sessionStorage,classRoom:null,getClassRoom(){if(!this.classRoom){var s=this.storage.getItem(e);s&&(this.classRoom=JSON.parse(s))}return this.classRoom},async setClassRoom(s,t){this.classRoom=s,t&&(this.classRoom.Code=await $api.getClassRoomCode()),this.save()},newInstance(){return new Promise((async(s,t)=>{this.classRoom={ClassRoomID:-1,ClassRoomName:"",LessonTitle:"",StartTime:"",EndTime:"",Status:0,HasHomeWork:!0,HomeWorks:[],Lessons:[],Code:""},this.classRoom.Code=await $api.getClassRoomCode(),s(this.classRoom)}))},save(){this.classRoom&&this.storage.setItem(e,JSON.stringify(this.classRoom))},isNewClassRoom(){return-1==this.classRoom.ClassRoomID}}}}]);
//# sourceMappingURL=65.b331c349.js.map