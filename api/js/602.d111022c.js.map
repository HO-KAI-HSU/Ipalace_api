{"version":3,"file":"js/602.d111022c.js","mappings":"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","sources":["webpack://npm.frontend/./src/components/Recommand.vue","webpack://npm.frontend/src/components/Recommand.vue","webpack://npm.frontend/./src/components/Recommand.vue?0ab3","webpack://npm.frontend/./src/components/Recommand.vue?f47b","webpack://npm.frontend/./src/views/LessonChapter.vue","webpack://npm.frontend/src/views/LessonChapter.vue","webpack://npm.frontend/./src/views/LessonChapter.vue?38fe","webpack://npm.frontend/./src/views/LessonChapter.vue?1f4f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"row refCourse\"},[_c('div',{staticClass:\"container\"},[_c('h4',[_vm._v(\"推薦課程\")]),_c('LessonSlider',{attrs:{\"loader\":_vm.load}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\">\r\n    <div class=\"row refCourse\">\r\n      <div class=\"container\">\r\n        <h4>推薦課程</h4>\r\n        <LessonSlider :loader=\"load\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport LessonSlider from \"@/components/LessonSlider.vue\";\r\nexport default {\r\n  components: {\r\n    LessonSlider,\r\n  },\r\n  methods: {\r\n    load() {\r\n      return this.$api.getRecommand();\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Recommand.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Recommand.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Recommand.vue?vue&type=template&id=27d8e424&\"\nimport script from \"./Recommand.vue?vue&type=script&lang=js&\"\nexport * from \"./Recommand.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.Lesson && _vm.Chapter)?_c('div',[_c('div',{staticClass:\"courseVideo\"},[_c('div',{staticClass:\"videoContent\",attrs:{\"id\":\"vid-cont\"}},[_c('video',{attrs:{\"src\":_vm._f(\"imageCDN\")(_vm.Chapter.VideoUrl),\"controls\":\"\",\"width\":\"100%\"},on:{\"play\":_vm.onplay,\"pause\":_vm.onpause,\"timeupdate\":_vm.onprogress,\"ended\":_vm.onended}}),_c('div',{staticClass:\"backToCourse\"},[_c('router-link',{attrs:{\"to\":`/lesson/${_vm.Lesson.LessonID}`}},[_vm._v(\"返回課程\")])],1),_c('div',{staticClass:\"className\"},[_vm._v(_vm._s(_vm.Chapter.ChapterName))]),(!_vm.User)?_c('div',{staticClass:\"blockVideo\"}):_vm._e()]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"courseContent\"},[_c('div',{staticClass:\"goBackCourse\"},[_c('router-link',{attrs:{\"to\":`/lesson/${_vm.Lesson.LessonID}`}},[_c('img',{attrs:{\"src\":\"/img/goBack.svg\"}}),_vm._v(\"返回課程\")])],1),_c('h3',[_vm._v(_vm._s(_vm.Chapter.ChapterName))]),_c('div',{staticClass:\"c_student\"},[_c('h4',[_vm._v(\"課程章節\")]),_c('div',{staticClass:\"contentBox\"},[(_vm.Lesson.HasChapterSubject)?_c('div',{staticClass:\"chapters\"},[_c('h5',[_vm._v(_vm._s(_vm.Lesson.ChapterTitle))]),_vm._l((_vm.Subjects),function(s){return [_c('h6',{key:s.ID},[_vm._v(_vm._s(s.Name))]),_c('div',{key:s.ID,staticClass:\"ch_list\"},[_c('ol',_vm._l((s.Chapters),function(c){return _c('li',{key:c.LessonChapterID,class:{ act: c.LessonChapterID == _vm.$route.params.id }},[_c('router-link',{attrs:{\"to\":`/lesson/chapter/${c.LessonChapterID}`}},[_c('b',{staticClass:\"ch_name\"},[_vm._v(_vm._s(c.ChapterName)+\" \"),(c.Learned)?[_vm._v(\"(已觀看)\")]:_vm._e()],2),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"mmss\")(c.VideoLength)))])])],1)}),0)])]})],2):_c('div',{staticClass:\"chapters\"},[_c('h5',[_vm._v(_vm._s(_vm.Lesson.ChapterTitle))]),_c('div',{staticClass:\"ch_list\"},[_c('ol',_vm._l((_vm.Chapters),function(c){return _c('li',{key:c.LessonChapterID,class:{ act: c.LessonChapterID == _vm.$route.params.id }},[_c('router-link',{attrs:{\"to\":`/lesson/chapter/${c.LessonChapterID}`}},[_c('b',{staticClass:\"ch_name\"},[_vm._v(_vm._s(c.ChapterName)+\" \"),(c.Learned)?[_vm._v(\"(已觀看)\")]:_vm._e()],2),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm._f(\"mmss\")(c.VideoLength)))])])],1)}),0)])])])])])])]),_c('Recommand'),(_vm.Student && _vm.Student.IsLearning)?_c('div',{staticClass:\"fixBottom\"},[_c('div',{staticClass:\"container\"},[_c('router-link',{class:{ off: !_vm.Student.Prev },attrs:{\"to\":`/lesson/${_vm.Student.Prev}`}},[_vm._v(\"上一堂課\")]),(_vm.HasHomeWork && _vm.Progress == 100)?_c('router-link',{staticClass:\"goWork\",attrs:{\"to\":`/homework/${_vm.Lesson.LessonID}`}},[_vm._v(\"課程習題\")]):_vm._e(),_c('router-link',{class:{ off: !_vm.Student.Next },attrs:{\"to\":`/lesson/${_vm.Student.Next}`}},[_vm._v(\"下一堂課\")])],1)]):_vm._e()],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div v-if=\"Lesson && Chapter\">\r\n    <div class=\"courseVideo\">\r\n      <div class=\"videoContent\" id=\"vid-cont\">\r\n        <video\r\n          :src=\"Chapter.VideoUrl | imageCDN\"\r\n          controls\r\n          width=\"100%\"\r\n          @play=\"onplay\"\r\n          @pause=\"onpause\"\r\n          @timeupdate=\"onprogress\"\r\n          @ended=\"onended\"\r\n        ></video>\r\n        <div class=\"backToCourse\">\r\n          <router-link :to=\"`/lesson/${Lesson.LessonID}`\">返回課程</router-link>\r\n        </div>\r\n        <div class=\"className\">{{ Chapter.ChapterName }}</div>\r\n        <div class=\"blockVideo\" v-if=\"!User\"></div>\r\n      </div>\r\n      <div class=\"container\">\r\n        <div class=\"courseContent\">\r\n          <div class=\"goBackCourse\">\r\n            <router-link :to=\"`/lesson/${Lesson.LessonID}`\">\r\n              <img src=\"/img/goBack.svg\" />返回課程</router-link\r\n            >\r\n          </div>\r\n          <h3>{{ Chapter.ChapterName }}</h3>\r\n          <div class=\"c_student\">\r\n            <h4>課程章節</h4>\r\n            <div class=\"contentBox\">\r\n              <div class=\"chapters\" v-if=\"Lesson.HasChapterSubject\">\r\n                <h5>{{ Lesson.ChapterTitle }}</h5>\r\n                <template v-for=\"s in Subjects\">\r\n                  <h6 :key=\"s.ID\">{{ s.Name }}</h6>\r\n                  <div class=\"ch_list\" :key=\"s.ID\">\r\n                    <ol>\r\n                      <li\r\n                        v-for=\"c in s.Chapters\"\r\n                        :class=\"{ act: c.LessonChapterID == $route.params.id }\"\r\n                        :key=\"c.LessonChapterID\"\r\n                      >\r\n                        <router-link\r\n                          :to=\"`/lesson/chapter/${c.LessonChapterID}`\"\r\n                          ><b class=\"ch_name\"\r\n                            >{{ c.ChapterName }}\r\n                            <template v-if=\"c.Learned\">(已觀看)</template></b\r\n                          ><span class=\"time\">{{\r\n                            c.VideoLength | mmss\r\n                          }}</span></router-link\r\n                        >\r\n                      </li>\r\n                    </ol>\r\n                  </div>\r\n                </template>\r\n              </div>\r\n              <div class=\"chapters\" v-else>\r\n                <h5>{{ Lesson.ChapterTitle }}</h5>\r\n                <div class=\"ch_list\">\r\n                  <ol>\r\n                    <li\r\n                      v-for=\"c in Chapters\"\r\n                      :class=\"{ act: c.LessonChapterID == $route.params.id }\"\r\n                      :key=\"c.LessonChapterID\"\r\n                    >\r\n                      <router-link :to=\"`/lesson/chapter/${c.LessonChapterID}`\"\r\n                        ><b class=\"ch_name\">{{ c.ChapterName }} <template v-if=\"c.Learned\">(已觀看)</template></b\r\n                        ><span class=\"time\">{{\r\n                          c.VideoLength | mmss\r\n                        }}</span></router-link\r\n                      >\r\n                    </li>\r\n                  </ol>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Recommand />\r\n    <div class=\"fixBottom\" v-if=\"Student && Student.IsLearning\">\r\n      <div class=\"container\">\r\n        <router-link\r\n          :class=\"{ off: !Student.Prev }\"\r\n          :to=\"`/lesson/${Student.Prev}`\"\r\n          >上一堂課</router-link\r\n        >\r\n        <router-link\r\n          class=\"goWork\"\r\n          v-if=\"HasHomeWork && Progress == 100\"\r\n          :to=\"`/homework/${Lesson.LessonID}`\"\r\n          >課程習題</router-link\r\n        >\r\n        <router-link\r\n          :class=\"{ off: !Student.Next }\"\r\n          :to=\"`/lesson/${Student.Next}`\"\r\n          >下一堂課</router-link\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Recommand from \"@/components/Recommand.vue\";\r\nimport moment from \"moment\";\r\n\r\nvar lastTime = 0;\r\nexport default {\r\n  components: {\r\n    Recommand,\r\n  },\r\n  data() {\r\n    return {\r\n      User: null,\r\n      Lesson: null,\r\n      Chapters: [],\r\n      Chapter: null,\r\n      Student: null,\r\n      HasHomeWork: true,\r\n      Progress: 0,\r\n      Subjects: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.load();\r\n    document.addEventListener(\"fullscreenchange\", this.onleavefullscreen);\r\n  },\r\n  methods: {\r\n    async load() {\r\n      this.Subjects = [];\r\n      this.User = this.$user.user;\r\n      var response = await this.$api.getLessonChapters(this.$route.params.id);\r\n      this.Lesson = response.Lesson;\r\n      var cMap = {};\r\n      response.Chapters.forEach((c) => {\r\n        c.Learned = false;\r\n        cMap[c.LessonChapterID] = c;\r\n      });\r\n\r\n      this.Chapters = response.Chapters;\r\n      this.Chapter = response.Chapters.filter(\r\n        (x) => x.LessonChapterID == this.$route.params.id\r\n      )[0];\r\n      if (this.Lesson.HasChapterSubject) {\r\n        var map = {};\r\n        this.Chapters.forEach((c) => {\r\n          var key = c.LessonSubjectID;\r\n          if (!map[key]) {\r\n            map[key] = [];\r\n          }\r\n          map[key].push(c);\r\n        });\r\n        this.Lesson.ChapterSubjects.forEach((s) => {\r\n          s.Chapters = map[s.ID];\r\n          this.Subjects.push(s);\r\n        });\r\n      }\r\n      if (this.$user.user) {\r\n        var time = await this.$api.getChapterProgress(this.$route.params.id);\r\n        if (time) {\r\n          this.$nextTick(\r\n            () => (document.querySelector(\"video\").currentTime = time.Time)\r\n          );\r\n        }\r\n\r\n        if (this.$user.user.Type == 2) {\r\n          var id = this.Lesson.LessonID;\r\n          response = await this.$api.getClassRoomByLessonID(id);\r\n          this.Progress = response.MemberLesson.Progress;\r\n          var room = response.ClassRoom;\r\n          if (moment().isBetween(room.StartTime, room.EndTime)) {\r\n            var index = room.Lessons.indexOf(id);\r\n            var student = {\r\n              IsLearning: true,\r\n              Prev: null,\r\n              Next: null,\r\n            };\r\n            if (index != -1) {\r\n              if (index > 0) {\r\n                student.Prev = room.Lessons[index - 1];\r\n              }\r\n              if (index < room.Lessons.length - 1) {\r\n                student.Next = room.Lessons[index + 1];\r\n              }\r\n            }\r\n            this.Student = student;\r\n\r\n            if (\r\n              !this.Lesson.HasHomeWork ||\r\n              !room.HasHomeWork ||\r\n              room.HomeWorks.indexOf(id) == -1\r\n            ) {\r\n              this.HasHomeWork = false;\r\n            }\r\n          } else {\r\n            this.Student = {\r\n              IsLearning: false,\r\n            };\r\n          }\r\n\r\n          var p = await this.$api.learn(this.$route.params.id);\r\n          this.Progress = p;\r\n\r\n          var lc = await this.$api.getLearnedChapter(id);\r\n          lc.forEach((c) => {\r\n            if (cMap[c.LessonChapterID]) {\r\n              cMap[c.LessonChapterID].Learned = true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    fullscreen() {\r\n      if (!document.fullscreenElement) {\r\n        document.getElementById(\"vid-cont\").requestFullscreen();\r\n        $(\"#vid-cont\").addClass(\"fs\");\r\n      } else if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n        $(\"#vid-cont\").removeClass(\"fs\");\r\n      }\r\n    },\r\n    onplay() {\r\n      console.log(\"play\");\r\n      document.getElementById(\"vid-cont\").requestFullscreen();\r\n      $(\"#vid-cont\").addClass(\"fs\");\r\n    },\r\n    onpause() {\r\n      console.log(\"pause\");\r\n      document.exitFullscreen();\r\n      $(\"#vid-cont\").removeClass(\"fs\");\r\n    },\r\n    onprogress(event) {\r\n      console.log(\"progress:\", event);\r\n      if (this.$user.user) {\r\n        var time = new Date().getTime();\r\n        if (time - lastTime > 1000) {\r\n          this.$api.updateChapterProgress({\r\n            LessonChapterID: this.$route.params.id,\r\n            Time: document.querySelector(\"video\").currentTime,\r\n            Done: false,\r\n          });\r\n          lastTime = time;\r\n        }\r\n      }\r\n    },\r\n    onleavefullscreen(event) {\r\n      console.log(event);\r\n      if (!document.fullscreenElement) {\r\n        document.querySelector(\"video\").pause();\r\n      }\r\n    },\r\n    onended(event) {\r\n      //console.log(\"end:\", event);\r\n      if (this.$user.user && this.FirstChapter) {\r\n        this.$api.updateChapterProgress({\r\n          LessonChapterID: this.$route.params.id,\r\n          Time: document.querySelector(\"video\").currentTime,\r\n          Done: true,\r\n        });\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    $route() {\r\n      this.load();\r\n      this.$nextTick(() => {\r\n        $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\r\n      });\r\n    },\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    document.removeEventListener(\"fullscreenchange\", this.onleavefullscreen);\r\n    next();\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LessonChapter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LessonChapter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LessonChapter.vue?vue&type=template&id=0b32bb50&\"\nimport script from \"./LessonChapter.vue?vue&type=script&lang=js&\"\nexport * from \"./LessonChapter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","load","staticRenderFns","components","LessonSlider","methods","$api","getRecommand","component","Lesson","Chapter","_f","VideoUrl","on","onplay","onpause","onprogress","onended","LessonID","_s","ChapterName","User","_e","HasChapterSubject","ChapterTitle","_l","Subjects","s","key","ID","Name","Chapters","c","LessonChapterID","class","act","$route","params","id","Learned","VideoLength","Student","IsLearning","off","Prev","HasHomeWork","Progress","Next","lastTime","Recommand","data","mounted","document","addEventListener","onleavefullscreen","$user","user","response","getLessonChapters","cMap","forEach","filter","x","map","LessonSubjectID","push","ChapterSubjects","time","getChapterProgress","$nextTick","querySelector","currentTime","Time","Type","getClassRoomByLessonID","MemberLesson","room","ClassRoom","moment","isBetween","StartTime","EndTime","index","Lessons","indexOf","student","length","HomeWorks","p","learn","lc","getLearnedChapter","fullscreen","fullscreenElement","exitFullscreen","$","removeClass","getElementById","requestFullscreen","addClass","console","log","event","Date","getTime","updateChapterProgress","Done","pause","FirstChapter","watch","animate","scrollTop","beforeRouteLeave","to","from","next","removeEventListener"],"sourceRoot":""}